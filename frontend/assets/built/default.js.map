{"version":3,"file":"default.js","sources":["default.js"],"sourcesContent":["// Script for processing html in default.hbs\n\n!function () {\n    handleDarkMode()\n    setHrefs()\n}();\n\nfunction handleDarkMode() {\n    let modeQueryList = window.matchMedia('(prefers-color-scheme: dark)');\n    const isDarkMode = () => localStorage.theme === 'dark' || (!('theme' in localStorage) && modeQueryList.matches);\n\n    if (isDarkMode()) {\n        document.documentElement.classList.add('dark')\n    } else {\n        document.documentElement.classList.remove('dark')\n    }\n\n    if (!('theme' in localStorage)) {\n        modeQueryList.addEventListener('change', function () {\n            if (!('theme' in localStorage)) changeMode(true, isDarkMode())\n        });\n    }\n\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        document.getElementById(\"theme-switch\").addEventListener(\"click\", () => {\n            changeMode(false, !isDarkMode())\n        });\n    });\n\n    function changeMode(fromSystem, darkMode) {\n        if (darkMode) {\n            if (!fromSystem) localStorage.theme = 'dark'\n            document.documentElement.classList.add('dark')\n        } else {\n            if (!fromSystem) localStorage.theme = 'light'\n            document.documentElement.classList.remove('dark')\n        }\n    }\n}\n\nfunction setHrefs() {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        document.querySelectorAll('[id=about-me]').forEach(e => e.href = window.location.origin)\n        let emailButton = document.querySelector('[id=email-me]')\n        if (emailButton != null) emailButton.href = `mailto: me@${window.location.hostname}`\n    });\n}\n\n// Get the details from a bookmark card and set the url\n// and image to the post card url and featured image\nfunction parseBookmark(content, linkId, imageId) {\n    let c = $('<div></div>').html(content)\n    let bookmark = $(c).find('figure.kg-bookmark-card')\n\n    // A post which is just a reference to an external article\n    // will contain nothing but the bookmark card and the reading time.\n    if (!bookmark || c.children().length !== 2) return\n\n    let url = bookmark.find('a.kg-bookmark-container').attr('href');\n    let image = bookmark.find('div.kg-bookmark-thumbnail img:first').attr('src');\n    let readingTime = $(c).find('.external-reading-time').text();\n\n\n    let anchor = $('#' + linkId);\n    let img = anchor.find('#' + imageId);\n    if (img.length) img.attr('src', image);\n\n    anchor.find('#external-tag').css('display', 'flex');\n    anchor.find('#reading-time').text(readingTime);\n    anchor.attr('href', url);\n    anchor.attr('target', '_blank');\n\n}"],"names":["handleDarkMode","let","modeQueryList","window","matchMedia","isDarkMode","localStorage","theme","matches","changeMode","fromSystem","darkMode","document","documentElement","classList","add","remove","addEventListener","getElementById","setHrefs","querySelectorAll","forEach","e","href","location","origin","emailButton","querySelector","hostname","parseBookmark","content","linkId","imageId","url","c","$","html","bookmark","find","children","length","attr","image","readingTime","text","img","anchor","css"],"mappings":"AAOA,SAASA,iBACLC,IAAIC,EAAgBC,OAAOC,WAAW,8BAA8B,EACpE,MAAMC,EAAa,IAA6B,SAAvBC,aAAaC,OAAqB,EAAE,UAAWD,eAAiBJ,EAAcM,QAoBvG,SAASC,EAAWC,EAAYC,GACxBA,GACKD,IAAYJ,aAAaC,MAAQ,QACtCK,SAASC,gBAAgBC,UAAUC,IAAI,MAAM,IAExCL,IAAYJ,aAAaC,MAAQ,SACtCK,SAASC,gBAAgBC,UAAUE,OAAO,MAAM,EAExD,CA1BIX,EAAW,EACXO,SAASC,gBAAgBC,UAAUC,IAAI,MAAM,EAE7CH,SAASC,gBAAgBC,UAAUE,OAAO,MAAM,EAG9C,UAAWV,cACbJ,EAAce,iBAAiB,SAAU,WAC/B,UAAWX,cAAeG,EAAW,CAAA,EAAMJ,EAAW,CAAC,CACjE,CAAC,EAGLO,SAASK,iBAAiB,mBAAoB,KAC1CL,SAASM,eAAe,cAAc,EAAED,iBAAiB,QAAS,KAC9DR,EAAW,CAAA,EAAO,CAACJ,EAAW,CAAC,CACnC,CAAC,CACL,CAAC,CAWL,CAEA,SAASc,WACLP,SAASK,iBAAiB,mBAAoB,KAC1CL,SAASQ,iBAAiB,eAAe,EAAEC,QAAQC,GAAKA,EAAEC,KAAOpB,OAAOqB,SAASC,MAAM,EACvFxB,IAAIyB,EAAcd,SAASe,cAAc,eAAe,EACrC,MAAfD,IAAqBA,EAAYH,KAAO,cAAcpB,OAAOqB,SAASI,SAC9E,CAAC,CACL,CAIA,SAASC,cAAcC,EAASC,EAAQC,GACpC/B,IAOIgC,EAPAC,EAAIC,EAAE,aAAa,EAAEC,KAAKN,CAAO,EACjCO,EAAWF,EAAED,CAAC,EAAEI,KAAK,yBAAyB,EAI7CD,GAAoC,IAAxBH,EAAEK,SAAS,EAAEC,SAE1BP,EAAMI,EAASC,KAAK,yBAAyB,EAAEG,KAAK,MAAM,EAC1DC,EAAQL,EAASC,KAAK,qCAAqC,EAAEG,KAAK,KAAK,EACvEE,EAAcR,EAAED,CAAC,EAAEI,KAAK,wBAAwB,EAAEM,KAAK,GAIvDC,GADAC,EAASX,EAAE,IAAMJ,CAAM,GACVO,KAAK,IAAMN,CAAO,GAC3BQ,QAAQK,EAAIJ,KAAK,MAAOC,CAAK,EAErCI,EAAOR,KAAK,eAAe,EAAES,IAAI,UAAW,MAAM,EAClDD,EAAOR,KAAK,eAAe,EAAEM,KAAKD,CAAW,EAC7CG,EAAOL,KAAK,OAAQR,CAAG,EACvBa,EAAOL,KAAK,SAAU,QAAQ,EAElC,CArEIzC,eAAe,EACfmB,SAAS"}