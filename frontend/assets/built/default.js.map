{"version":3,"file":"default.js","sources":["default.js"],"sourcesContent":["// Script for processing html in default.hbs\n\n\n!function () {\n    handleDarkMode()\n    setHrefs()\n}();\n\nfunction handleDarkMode() {\n    let modeQueryList = window.matchMedia('(prefers-color-scheme: dark)');\n    const isDarkMode = () => localStorage.theme === 'dark' || (!('theme' in localStorage) && modeQueryList.matches);\n\n    if (isDarkMode()) {\n        document.documentElement.classList.add('dark')\n    } else {\n        document.documentElement.classList.remove('dark')\n    }\n\n    if (!('theme' in localStorage)) {\n        modeQueryList.addEventListener('change', function () {\n            if (!('theme' in localStorage)) changeMode(true, isDarkMode())\n        });\n    }\n\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        document.getElementById(\"theme-switch\").addEventListener(\"click\", () => {\n            changeMode(false, !isDarkMode())\n        });\n    });\n\n    function changeMode(fromSystem, darkMode) {\n        if (darkMode) {\n            if (!fromSystem) localStorage.theme = 'dark'\n            document.documentElement.classList.add('dark')\n        } else {\n            if (!fromSystem) localStorage.theme = 'light'\n            document.documentElement.classList.remove('dark')\n        }\n    }\n}\n\nfunction setHrefs() {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        document.querySelectorAll('[id=about-me]').forEach(e => e.href = window.location.origin)\n        let emailButton = document.querySelector('[id=email-me]')\n        if (emailButton != null) emailButton.href = `mailto: me@${window.location.hostname}`\n    });\n}\n\n// Get the details from a bookmark card and set the url\n// and image to the post card url and featured image\nfunction parseBookmark(content, linkId, imageId) {\n    let c = document.createElement('div')\n    c.innerHTML = content\n    let bookmark = c.querySelector(':scope > figure.kg-bookmark-card')\n    // A post which is just a reference to an external article\n    // will contain nothing but the bookmark card.\n    if (bookmark != null && c.children.length === 1) {\n        let url = bookmark.querySelector('a.kg-bookmark-container').href\n        let image = bookmark.querySelector('div.kg-bookmark-thumbnail').getElementsByTagName('img')[0].src\n        let imageElement = document.getElementById(imageId);\n        if (imageElement != null) imageElement.src = image\n        document.getElementById(linkId).href = url\n    }\n}"],"names":["handleDarkMode","let","modeQueryList","window","matchMedia","isDarkMode","localStorage","theme","matches","changeMode","fromSystem","darkMode","document","documentElement","classList","add","remove","addEventListener","getElementById","setHrefs","querySelectorAll","forEach","e","href","location","origin","emailButton","querySelector","hostname","parseBookmark","content","linkId","imageId","c","createElement","bookmark","innerHTML","children","length","url","image","getElementsByTagName","src","imageElement"],"mappings":"AAQA,SAASA,iBACLC,IAAIC,EAAgBC,OAAOC,WAAW,8BAA8B,EACpE,MAAMC,EAAa,IAA6B,SAAvBC,aAAaC,OAAqB,EAAE,UAAWD,eAAiBJ,EAAcM,QAoBvG,SAASC,EAAWC,EAAYC,GACxBA,GACKD,IAAYJ,aAAaC,MAAQ,QACtCK,SAASC,gBAAgBC,UAAUC,IAAI,MAAM,IAExCL,IAAYJ,aAAaC,MAAQ,SACtCK,SAASC,gBAAgBC,UAAUE,OAAO,MAAM,EAExD,CA1BIX,EAAW,EACXO,SAASC,gBAAgBC,UAAUC,IAAI,MAAM,EAE7CH,SAASC,gBAAgBC,UAAUE,OAAO,MAAM,EAG9C,UAAWV,cACbJ,EAAce,iBAAiB,SAAU,WAC/B,UAAWX,cAAeG,EAAW,CAAA,EAAMJ,EAAW,CAAC,CACjE,CAAC,EAGLO,SAASK,iBAAiB,mBAAoB,KAC1CL,SAASM,eAAe,cAAc,EAAED,iBAAiB,QAAS,KAC9DR,EAAW,CAAA,EAAO,CAACJ,EAAW,CAAC,CACnC,CAAC,CACL,CAAC,CAWL,CAEA,SAASc,WACLP,SAASK,iBAAiB,mBAAoB,KAC1CL,SAASQ,iBAAiB,eAAe,EAAEC,QAAQC,GAAKA,EAAEC,KAAOpB,OAAOqB,SAASC,MAAM,EACvFxB,IAAIyB,EAAcd,SAASe,cAAc,eAAe,EACrC,MAAfD,IAAqBA,EAAYH,KAAO,cAAcpB,OAAOqB,SAASI,SAC9E,CAAC,CACL,CAIA,SAASC,cAAcC,EAASC,EAAQC,GACpC/B,IAAIgC,EAAIrB,SAASsB,cAAc,KAAK,EAEhCC,GADJF,EAAEG,UAAYN,EACCG,EAAEN,cAAc,kCAAkC,GAGjD,MAAZQ,GAA0C,IAAtBF,EAAEI,SAASC,SAC3BC,EAAMJ,EAASR,cAAc,yBAAyB,EAAEJ,KACxDiB,EAAQL,EAASR,cAAc,2BAA2B,EAAEc,qBAAqB,KAAK,EAAE,GAAGC,IAE3E,OADhBC,EAAe/B,SAASM,eAAec,CAAO,KACxBW,EAAaD,IAAMF,GAC7C5B,SAASM,eAAea,CAAM,EAAER,KAAOgB,EAE/C,CA5DIvC,eAAe,EACfmB,SAAS"}