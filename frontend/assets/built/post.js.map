{"version":3,"file":"post.js","sources":["post.js"],"sourcesContent":["// Script for processing html in post.hbs\n\n!function () {\n    const images = document.querySelectorAll(\".kg-image-card img\");\n    let wrapperMinAR = getMinAR()\n    for (let i = 0; i < images.length; i++) {\n        let image = images[i]\n        let lightBoxId = `lightbox__photo__${i}`\n        let imgWrapper = document.createElement(\"div\")\n        imgWrapper.style.backgroundImage = `url(\"${image.currentSrc || image.src}\")`\n        imgWrapper.classList.add(\"group\")\n        let imgW = Number(image.getAttribute(\"width\"))\n        let imgH = Number(image.getAttribute(\"height\"))\n        let imgAR = `${imgW}/${imgH}`\n\n        imgWrapper.style.aspectRatio = Math.max((imgW / imgH), wrapperMinAR).toString()\n        image.style.aspectRatio = `${imgW}/${imgH}`\n        imgWrapper.style.maxHeight = `${imgH}px`\n        image.style.maxWidth = `${imgW}px`\n        image.style.maxHeight = `${imgH}px`\n\n        let container = image.parentElement\n        container.insertBefore(imgWrapper, image.parentElement.firstChild)\n        imgWrapper.append(image)\n        imgWrapper.insertAdjacentHTML(\"afterbegin\", `<span onclick='showLightBox(\"${lightBoxId}\");' class='photo-zoom-handle'><svg width=\"18\" height=\"18\" viewBox=\"0 0 20 20\" fill=\"none\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m19 19-4.35-4.35M9 6v6M6 9h6m5 0A8 8 0 1 1 1 9a8 8 0 0 1 16 0Z\"/></svg></span>`)\n        container.insertAdjacentHTML(\"beforebegin\", `<div class='photo-lightbox' id='${lightBoxId}'><div class=\"group\" style=\"${getZoomImgWrapperStyle(imgW, imgH)}\"><span onclick='closeLightBox(\"${lightBoxId}\");' class='photo-zoom-handle'><svg width=\"18\" height=\"18\" viewBox=\"0 0 20 20\" fill=\"none\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m19 19-4.35-4.35M6 9h6m5 0A8 8 0 1 1 1 9a8 8 0 0 1 16 0Z\"/></svg></span><img src=\"${image.src}\" alt=\"${image.alt}\" style=\"aspect-ratio: ${imgAR}\"/></div></div>`)\n    }\n}();\n\n!function () {\n    let codes = document.querySelectorAll('code[class*=\"language-\"]')\n    for (let i = 0; i < codes.length; i++) {\n        let code = codes[i]\n        let pre = code.parentElement\n        if (pre.tagName.toLowerCase() !== 'pre') continue\n\n        let copied = `<span class=\"hide\" id=\"copied\"><span>Copied</span><svg class=\"fill-greenSet dark:fill-greenSet-dark\" width=\"20\" height=\"20\" stroke=\"none\" fill=\"none\"><circle cx=\"10\" cy=\"10\" r=\"10\"/><g clip-path=\"url(#a)\"><path fill=\"#fff\" d=\"M8.438 12.188 6.25 10l-.73.73 2.918 2.916 6.25-6.25-.73-.73-5.52 5.521Z\"/></g><defs><clipPath id=\"a\"><path fill=\"#fff\" d=\"M3.75 3.75h12.5v12.5H3.75z\"/></clipPath></defs></svg></span>`\n        let copy = `<span id=\"copy\" onclick='copyCode(this.parentElement)'><span>Copy</span><svg width=\"22\" height=\"22\" fill=\"none\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9.5 1.003c-.675.009-1.08.048-1.408.215a2 2 0 0 0-.874.874c-.167.328-.206.733-.215 1.408M18.5 1.003c.675.009 1.08.048 1.408.215a2 2 0 0 1 .874.874c.167.328.206.733.215 1.408m0 9c-.009.675-.048 1.08-.215 1.408a2 2 0 0 1-.874.874c-.328.167-.733.206-1.408.215M21 7v2m-8-8h2M4.2 21h7.6c1.12 0 1.68 0 2.108-.218a2 2 0 0 0 .874-.874C15 19.48 15 18.92 15 17.8v-7.6c0-1.12 0-1.68-.218-2.108a2 2 0 0 0-.874-.874C13.48 7 12.92 7 11.8 7H4.2c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874C1 8.52 1 9.08 1 10.2v7.6c0 1.12 0 1.68.218 2.108a2 2 0 0 0 .874.874C2.52 21 3.08 21 4.2 21Z\"/></svg></span>`\n        pre.insertAdjacentHTML(\"afterbegin\", `<div class=\"code-copy\"><div>${copied}${copy}</div></div>`)\n    }\n}();\n\n!function () {\n    document.getElementById(\"back_icon\").parentElement.href = `${window.location.origin}/blog`\n    document.getElementById(\"post-link-copy\").addEventListener(\"click\", (event) => {\n        let e = event.currentTarget;\n        copy(e, window.location.href, () => {\n            e.classList.toggle(\"copied\")\n        })\n    })\n}();\n\n\nfunction closeLightBox(id) {\n    document.getElementById(id).style.display = \"none\"\n    document.body.style.overflowY = 'auto'\n    document.body.style.overflowX = null\n}\n\nfunction showLightBox(id) {\n    document.getElementById(id).style.display = 'flex'\n    document.body.style.overflowY = 'hidden'\n    document.body.style.overflowX = 'unset'\n}\n\nfunction copyCode(e) {\n    let code = e.parentElement.parentElement.getElementsByTagName('code')[0]\n    let text = code.innerText || code.textContent\n    copy(e, text)\n}\n\nfunction copy(element, text, toggle) {\n    if (element.children[0].className !== 'hide') return\n    navigator.clipboard.writeText(text).then(function () {\n        element.children[0].classList.toggle(\"hide\")\n        element.children[1].classList.toggle(\"hide\")\n        if (typeof toggle === 'function') toggle()\n        setTimeout(() => {\n            element.children[0].classList.toggle(\"hide\")\n            element.children[1].classList.toggle(\"hide\")\n            if (typeof toggle === 'function') toggle()\n        }, 2000);\n    });\n}\n\nfunction getMinAR() {\n    // 768 is tailwinds md breakpoint: https://tailwindcss.com/docs/responsive-design\n    if ($( window ).width() > 768) return 1.5\n    return 0.6\n}\n\nfunction getZoomImgWrapperStyle(imgW, imgH) {\n    let minW = Math.min(imgW, $( window ).width())\n    let minH = Math.min(imgH, $( window ).height())\n    let style = `aspect-ratio: ${imgW / imgH}; `\n    if (minH > minW) {\n        style += `height: auto; max-height: 100%; width: ${minW}px;`\n    } else  {\n        style += `width: auto; max-width: 100%; height: ${minH}px;`\n    }\n    return style\n}\n"],"names":["closeLightBox","id","document","getElementById","style","display","body","overflowY","overflowX","showLightBox","copyCode","e","let","code","parentElement","getElementsByTagName","copy","innerText","textContent","element","text","toggle","children","className","navigator","clipboard","writeText","then","classList","setTimeout","getMinAR","$","window","width","getZoomImgWrapperStyle","imgW","imgH","minW","Math","min","minH","height","images","querySelectorAll","wrapperMinAR","i","length","image","lightBoxId","imgWrapper","createElement","backgroundImage","currentSrc","src","add","Number","getAttribute","imgAR","container","aspectRatio","max","toString","maxHeight","maxWidth","insertBefore","firstChild","append","insertAdjacentHTML","alt","codes","pre","tagName","toLowerCase","href","location","origin","addEventListener","event","currentTarget"],"mappings":"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"}