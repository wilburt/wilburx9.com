{"version":3,"file":"tag.js","sources":["tag.js"],"sourcesContent":["$(function () {\n    let request = null\n    let currentSlug = \"\"\n\n    function onRequestComplete(feed, footer, loader, anim) {\n        feed.stop().fadeIn(300, 'linear')\n        footer.stop().fadeIn(300, 'linear')\n        loader.stop().fadeOut(300, 'linear', function () {\n            loader.children().empty()\n        })\n        anim.stop();\n        anim.destroy();\n        request = null\n    }\n\n    $('.header-tag').on('click', function (event) {\n        event.preventDefault() // prevent the link from navigating to a new page\n\n        let slug = $(this).data('slug')\n        currentSlug = slug\n\n        if (request) request.abort()\n\n        let indicator = $(this).children('.gh-tag-nav-indicator')\n\n        // Check if the tag is already selected\n        if (indicator.attr('id')) {\n            indicator.removeAttr('id')\n            slug = \"\" // Empty the slug so the home page will be loaded\n        } else {\n            indicator.attr('id', 'active')\n        }\n        $('.header-tag').not(this).children('.gh-tag-nav-indicator').removeAttr('id')\n\n        let $postFeed = $('.gh-post-feed')\n        let $postFeedFooter = $('.gh-post-feed-footer')\n        let $postLoader = $('.gh-post-loader #loader')\n\n        $postFeed.stop().fadeOut(300, 'linear')\n        $postFeedFooter.stop().fadeOut(300, 'linear')\n        $postLoader.stop().fadeIn(300, 'linear')\n\n        let animation = bodymovin.loadAnimation({\n            container: $postLoader[0],\n            renderer: 'svg',\n            loop: true,\n            autoplay: true,\n            path: '/assets/lottie/loading.json'\n        })\n\n        request = $.ajax({\n            url: `/blog/${slug}`,\n            type: 'GET',\n            dataType: 'html',\n            success: function (data) {\n                if (currentSlug !==  slug) {\n                    console.log(`Not updating after success. ${currentSlug} :: ${slug}`)\n                    return\n                }\n                let html = $(data);\n                $('.gh-post-feed').html(html.find('.gh-post-feed').html())\n                onRequestComplete($postFeed, $postFeedFooter, $postLoader, animation)\n                setupInfiniteScroll(html.find('.total-page-count').text(), `${slug}/`)\n\n            },\n            error: function () {\n                if (currentSlug !==  slug) {\n                    console.log(`Not updating after error. ${currentSlug} :: ${slug}`)\n                    return\n                }\n                onRequestComplete($postFeed, $postFeedFooter, $postLoader, animation)\n            }\n        })\n\n\n    })\n})"],"names":["$","let","request","currentSlug","onRequestComplete","feed","footer","loader","anim","stop","fadeIn","fadeOut","children","empty","destroy","on","event","preventDefault","slug","this","data","abort","indicator","attr","removeAttr","not","$postFeed","$postFeedFooter","$postLoader","animation","bodymovin","loadAnimation","container","renderer","loop","autoplay","path","ajax","url","type","dataType","success","console","log","html","find","setupInfiniteScroll","text","error"],"mappings":"AAAAA,EAAE,WACEC,IAAIC,EAAU,KACVC,EAEJ,SAASC,EAAkBC,EAAMC,EAAQC,EAAQC,GAC7CH,EAAKI,KAAK,EAAEC,OAAO,IAAK,QAAQ,EAChCJ,EAAOG,KAAK,EAAEC,OAAO,IAAK,QAAQ,EAClCH,EAAOE,KAAK,EAAEE,QAAQ,IAAK,SAAU,WACjCJ,EAAOK,SAAS,EAAEC,MAAM,CAC5B,CAAC,EACDL,EAAKC,KAAK,EACVD,EAAKM,QAAQ,EACbZ,EAAU,IACd,CAEAF,EAAE,aAAa,EAAEe,GAAG,QAAS,SAAUC,GACnCA,EAAMC,eAAe,EAErBhB,IAAIiB,EAAOlB,EAAEmB,IAAI,EAAEC,KAAK,MAAM,EAC9BjB,EAAce,EAEVhB,GAASA,EAAQmB,MAAM,EAEvBC,EAAYtB,EAAEmB,IAAI,EAAEP,SAAS,uBAAuB,EAGpDU,EAAUC,KAAK,IAAI,GACnBD,EAAUE,WAAW,IAAI,EACzBN,EAAO,IAEPI,EAAUC,KAAK,KAAM,QAAQ,EAEjCvB,EAAE,aAAa,EAAEyB,IAAIN,IAAI,EAAEP,SAAS,uBAAuB,EAAEY,WAAW,IAAI,EAE5EvB,IAAIyB,EAAY1B,EAAE,eAAe,EAC7B2B,EAAkB3B,EAAE,sBAAsB,EAC1C4B,EAAc5B,EAAE,yBAAyB,EAMzC6B,GAJJH,EAAUjB,KAAK,EAAEE,QAAQ,IAAK,QAAQ,EACtCgB,EAAgBlB,KAAK,EAAEE,QAAQ,IAAK,QAAQ,EAC5CiB,EAAYnB,KAAK,EAAEC,OAAO,IAAK,QAAQ,EAEvBoB,UAAUC,cAAc,CACpCC,UAAWJ,EAAY,GACvBK,SAAU,MACVC,KAAM,CAAA,EACNC,SAAU,CAAA,EACVC,KAAM,6BACV,CAAC,GAEDlC,EAAUF,EAAEqC,KAAK,CACbC,IAAK,SAASpB,EACdqB,KAAM,MACNC,SAAU,OACVC,QAAS,SAAUrB,GACXjB,IAAiBe,EACjBwB,QAAQC,mCAAmCxC,QAAkBe,CAAM,GAGnE0B,EAAO5C,EAAEoB,CAAI,EACjBpB,EAAE,eAAe,EAAE4C,KAAKA,EAAKC,KAAK,eAAe,EAAED,KAAK,CAAC,EACzDxC,EAAkBsB,EAAWC,EAAiBC,EAAaC,CAAS,EACpEiB,oBAAoBF,EAAKC,KAAK,mBAAmB,EAAEE,KAAK,EAAM7B,EAAH,GAAU,EAEzE,EACA8B,MAAO,WACC7C,IAAiBe,EACjBwB,QAAQC,iCAAiCxC,QAAkBe,CAAM,EAGrEd,EAAkBsB,EAAWC,EAAiBC,EAAaC,CAAS,CACxE,CACJ,CAAC,CAGL,CAAC,CACL,CAAC"}