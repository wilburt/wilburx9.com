function renderCaptcha(){let t=$("html").hasClass("dark");turnstile.ready(function(){turnstile.render(".form-captcha-container",{sitekey:"1x00000000000000000000AA",action:"email-subscription",theme:t?"dark":"light","response-field-name":"captcha",callback:()=>submitForm()})}),$(".subscription-content .form-cta-container").stop().fadeOut(300,"linear"),$(".subscription-content .form-captcha-container").stop().fadeIn(300,"linear")}function submitForm(){let t=$(".subscription-loader #loader"),s=getProgressAnimation(t);$(".subscription-modal form").addClass("hide"),t.parent().removeClass("hide"),setTimeout(function(){handleSubmitSuccess(t,s)},3e3)}function handleSubmitSuccess(t,s){var n=$(".subscription-success"),e=n.find("#success-icon");let i=getLottieAnimation(e,"done");$(".subscription-success .success-cta").off("click").on("click",function(){i.stop(),i.destroy(),closeSubscriptionModal()}),t.parent().addClass("hide"),n.removeClass("hide"),s.stop(),s.destroy(),t.children().empty()}function handleFormSubmission(){$(".subscription-content form").on("submit",function(t){t.preventDefault(),validateForm()&&renderCaptcha()})}function validateForm(){var t=$('.subscription-modal input[type="email"]'),s=t.val();return""!==s&&/\S+@\S+/.test(s)?(t.removeClass("error"),t.closest(".subscription-modal").find(".form-error").stop().fadeOut(300,"linear"),t.removeData("input-listener"),t.off("input"),!0):(handleFormError(t),!1)}function handleFormError(t){t.addClass("error");var s=t.closest(".subscription-modal").find(".form-error");s.text("Please enter a valid email address"),s.stop().fadeIn(300,"linear"),t.data("input-listener")||(t.data("input-listener",!0),t.on("input",function(){validateForm()}))}function handleOnFocus(){$('.subscription-modal input[type="email"]').on("blur",function(){var t=$(this).next("label");""===$(this).val().trim()?t.removeClass("active"):t.addClass("active")})}function setupSubscription(t){$("#post-subscribe").click(function(){showSubscription(t)}),$(document).keyup(function(t){"Escape"===t.key&&closeSubscriptionModal()}),$(".subscription-modal").click(function(t){t.target===this&&closeSubscriptionModal()})}function showSubscription(t){$(".subscription-modal").fadeIn(),$(".subscription-content").css({transform:"translateY(0%) translateX(-50%)",opacity:1});t=$(".subscription-content #"+t);0<t.length&&t.prop("checked",!0)}function closeSubscriptionModal(){var t,s=".subscription-loader";$(s).hasClass("hide")&&($(".subscription-content").css({transform:"translateY(50%) translateX(-50%)",opacity:0}),$(".subscription-modal").fadeOut(),(t=$(".subscription-modal form")).removeClass("hide"),t[0].reset(),$('.subscription-modal input[type="email"]').next("label").removeClass("active"),$(".form-captcha-container iframe").remove(),$(".subscription-content .form-cta-container").stop().fadeIn(0),$(".subscription-success").addClass("hide"),$(s).addClass("hide"))}$(function(){handleOnFocus(),handleFormSubmission()});
//# sourceMappingURL=subscription.js.map